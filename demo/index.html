<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weavr React SDK Demo</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 0 20px;
    }
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    .secure-input-container {
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 12px;
      min-height: 20px;
    }
    .secure-input-container.valid {
      border-color: green;
    }
    .secure-input-container.invalid {
      border-color: red;
    }
    button {
      background: #0066cc;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover {
      background: #0052a3;
    }
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .status {
      margin-top: 20px;
      padding: 12px;
      border-radius: 4px;
      background: #f5f5f5;
    }
    .card-display {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }
    .card-field {
      padding: 12px;
      background: #f5f5f5;
      border-radius: 4px;
      min-width: 100px;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="module">
    // This demo shows how to use the SDK
    // In a real app, you'd import from '@weavr/react-sdk'

    import React from 'https://esm.sh/react@18'
    import ReactDOM from 'https://esm.sh/react-dom@18/client'

    // Since we can't easily import the built SDK in a demo HTML,
    // here's how you'd use it in a real React app:

    const DemoInfo = () => {
      return React.createElement('div', null, [
        React.createElement('h1', { key: 'h1' }, 'Weavr React SDK Demo'),
        React.createElement('p', { key: 'p1' }, 'To test the SDK in a real application:'),
        React.createElement('ol', { key: 'ol' }, [
          React.createElement('li', { key: '1' }, 'Create a new React project: npx create-react-app my-app --template typescript'),
          React.createElement('li', { key: '2' }, 'Install the SDK: npm install /path/to/weavr-react-sdk'),
          React.createElement('li', { key: '3' }, 'Use the components as shown below'),
        ]),
        React.createElement('h2', { key: 'h2' }, 'Example Usage'),
        React.createElement('pre', {
          key: 'pre',
          style: { background: '#f5f5f5', padding: '16px', borderRadius: '4px', overflow: 'auto' }
        }, `import {
  WeavrProvider,
  SecureInput,
  SecureSpan,
  useSecureForm,
  useAssociate
} from '@weavr/react-sdk'

function App() {
  return (
    <WeavrProvider
      uiKey="your-ui-key"
      environment="sandbox"
    >
      <PasswordForm />
    </WeavrProvider>
  )
}

function PasswordForm() {
  const { tokenize } = useSecureForm()
  const [isValid, setIsValid] = useState(false)

  const handleSubmit = async (e) => {
    e.preventDefault()
    const tokens = await tokenize()
    console.log('Tokens:', tokens)
    // Send tokens to your backend
  }

  return (
    <form onSubmit={handleSubmit}>
      <SecureInput
        name="password"
        type="password"
        options={{
          placeholder: 'Enter password',
          maxlength: 30,
          style: {
            base: { fontSize: '16px' }
          }
        }}
        onChange={(data) => setIsValid(data.valid)}
        className="secure-input"
      />
      <button type="submit" disabled={!isValid}>
        Submit
      </button>
    </form>
  )
}

// For displaying card details
function CardDetails({ token }) {
  const { associate, isAssociated } = useAssociate()

  useEffect(() => {
    associate('Bearer user-auth-token')
  }, [])

  if (!isAssociated) return <p>Loading...</p>

  return (
    <div>
      <SecureSpan type="cardNumber" token={token} />
      <SecureSpan type="cvv" token={token} />
    </div>
  )
}`),
      ])
    }

    const root = ReactDOM.createRoot(document.getElementById('root'))
    root.render(React.createElement(DemoInfo))
  </script>
</body>
</html>
